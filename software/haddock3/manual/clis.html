<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Command Line Interfaces - Haddock3 User Manual</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="haddocking.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="haddocking.html"><strong aria-hidden="true">1.1.</strong> HADDOCK - High Ambiguity Docking</a></li><li class="chapter-item expanded "><a href="haddock3.html"><strong aria-hidden="true">1.2.</strong> Haddock3 modularity</a></li></ol></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="download-haddock3.html"><strong aria-hidden="true">2.1.</strong> Obtaining HADDOCK</a></li><li class="chapter-item expanded "><a href="install-cns.html"><strong aria-hidden="true">2.2.</strong> CNS</a></li><li class="chapter-item expanded "><a href="virtual-environments.html"><strong aria-hidden="true">2.3.</strong> Virtual environments (conda / venv)</a></li></ol></li><li class="chapter-item expanded "><a href="clis.html" class="active"><strong aria-hidden="true">3.</strong> Command Line Interfaces</a></li><li class="chapter-item expanded "><a href="structure_requirements.html"><strong aria-hidden="true">4.</strong> Preparing input files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="structure_requirements.html"><strong aria-hidden="true">4.1.</strong> Haddock3 requirements</a></li><li class="chapter-item expanded "><a href="pdbtools.html"><strong aria-hidden="true">4.2.</strong> Tools to manipulate structures</a></li></ol></li><li class="chapter-item expanded "><a href="intro_restraints.html"><strong aria-hidden="true">5.</strong> Generating restraints for HADDOCK</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="restraints_cli.html"><strong aria-hidden="true">5.1.</strong> haddock3-restraints</a></li><li class="chapter-item expanded "><a href="symmetry_restraints.html"><strong aria-hidden="true">5.2.</strong> Symmetry restraints</a></li><li class="chapter-item expanded "><a href="abinitio_docking.html"><strong aria-hidden="true">5.3.</strong> Ab-initio docking mode</a></li><li class="chapter-item expanded "><a href="flexibility.html"><strong aria-hidden="true">5.4.</strong> Flexibility</a></li></ol></li><li class="chapter-item expanded "><a href="config_file.html"><strong aria-hidden="true">6.</strong> Generating a docking protocol</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="global_parameters.html"><strong aria-hidden="true">6.1.</strong> Global parameters</a></li><li class="chapter-item expanded "><a href="modules_parameters.html"><strong aria-hidden="true">6.2.</strong> Concept of modules / parameters</a></li><li class="chapter-item expanded "><a href="important_parameters.html"><strong aria-hidden="true">6.3.</strong> Notable parameters</a></li></ol></li><li class="chapter-item expanded "><a href="modules.html"><strong aria-hidden="true">7.</strong> Available modules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="modules/topology.html"><strong aria-hidden="true">7.1.</strong> Topology</a></li><li class="chapter-item expanded "><a href="modules/sampling.html"><strong aria-hidden="true">7.2.</strong> Sampling</a></li><li class="chapter-item expanded "><a href="modules/refinement.html"><strong aria-hidden="true">7.3.</strong> Refinement</a></li><li class="chapter-item expanded "><a href="modules/scoring.html"><strong aria-hidden="true">7.4.</strong> Scoring</a></li><li class="chapter-item expanded "><a href="modules/analysis.html"><strong aria-hidden="true">7.5.</strong> Analysis</a></li></ol></li><li class="chapter-item expanded "><a href="docking_scenarios.html"><strong aria-hidden="true">8.</strong> Docking scenarios</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="docking_scenarios.html"><strong aria-hidden="true">8.1.</strong> protein-protein docking</a></li><li class="chapter-item expanded "><a href="docking_scenarios.html"><strong aria-hidden="true">8.2.</strong> antibody-antigen docking</a></li><li class="chapter-item expanded "><a href="docking_scenarios.html"><strong aria-hidden="true">8.3.</strong> protein-ligand docking</a></li><li class="chapter-item expanded "><a href="docking_scenarios.html"><strong aria-hidden="true">8.4.</strong> protein-glycan docking</a></li></ol></li><li class="chapter-item expanded "><a href="info.html"><strong aria-hidden="true">9.</strong> Getting support / How to ask for help</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="info.html"><strong aria-hidden="true">9.1.</strong> Getting support / How to ask for help</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">9.2.</strong> FAQ</a></li></ol></li><li class="chapter-item expanded "><a href="tutorials.html"><strong aria-hidden="true">10.</strong> Tutorials</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials.html"><strong aria-hidden="true">10.1.</strong> Access to various tutorials</a></li><li class="chapter-item expanded "><a href="bpg.html"><strong aria-hidden="true">10.2.</strong> HADDOCK best practice guide - A must read when starting to use our software!</a></li></ol></li><li class="chapter-item expanded "><a href="eco_system.html"><strong aria-hidden="true">11.</strong> Haddock3 eco-system</a></li><li class="chapter-item expanded "><a href="online_lectures.html"><strong aria-hidden="true">12.</strong> Online lectures</a></li><li class="chapter-item expanded "><a href="citing.html"><strong aria-hidden="true">13.</strong> How to cite haddock3</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="citing.html"><strong aria-hidden="true">13.1.</strong> Citing haddock3</a></li><li class="chapter-item expanded "><a href="publications.html"><strong aria-hidden="true">13.2.</strong> Haddock3-related publications</a></li></ol></li><li class="chapter-item expanded "><a href="acknowledgements.html"><strong aria-hidden="true">14.</strong> Acknowledgements</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Haddock3 User Manual</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="command-line-interfaces"><a class="header" href="#command-line-interfaces">Command line interfaces</a></h1>
<p>Haddock3 is a software that can read configuration files and compute data.
While there will be <a href="">a web application</a>, haddock3 do not have interface, and you must use it from the command line.
While this may have some negative impact for some unexperienced user, it is also very powerful as it allows custom scripts to launch haddock, and therefore integrate it in your own pipelines.</p>
<p>To use the command line interface, you must open a terminal:</p>
<ul>
<li>[iTerm / Terminal]: for Mac users, defaults terminals are available and fully functional.</li>
<li>[WindowsPowerShell]: The windows solution to open a terminal.</li>
<li><a href="">VSCode</a>: an integrated developping environnment (IDE) that allows you to run command lines in the terminal.</li>
</ul>
<p>Haddock3 comes with several Command Line Interfaces (CLIs), that are described and listed below:</p>
<ul>
<li><a href="#haddock3">haddock3</a>: Main CLI for running a workflow.</li>
<li><a href="#haddock3-cfg">haddock3-cfg</a>: Obtain information about module parameters</li>
<li><a href="#haddock3-restraints">haddock3-restraints</a>: Generation of restraints.</li>
<li><a href="#haddock3-score">haddock3-score</a>: Scoring CLI.</li>
<li><a href="#haddock3-analyse">haddock3-analyse</a>: Analysis of output.</li>
<li><a href="#haddock3-analyse">haddock3-traceback</a>: Traceback of generated docking models.</li>
<li><a href="#haddock3-re">haddock3-re</a>: Recomputing modules with different parameters.
<ul>
<li><a href="#-re-score">haddock3-re score</a>: To modify scoring function weights.</li>
<li><a href="#-re-clustfcc">haddock3-re clustfcc</a>: To modify <code>[clustfcc]</code> parameters.</li>
<li><a href="#-re-clustrmsd">haddock3-re clustrmsd</a>: To modify <code>[clustrmsd]</code> parameters.</li>
</ul>
</li>
<li><a href="#haddock3-copy">haddock3-copy</a>: To copy a haddock3 run.</li>
<li><a href="#haddock3-clean">haddock3-clean</a>: Archiving a run.</li>
<li><a href="#haddock3-unpack">haddock3-unpack</a>: Uncompressing an archived a run.</li>
<li><a href="#haddock3-pp">haddock3-pp</a>: Pre-processing of input files.</li>
</ul>
<h2 id="haddock3"><a class="header" href="#haddock3">haddock3</a></h2>
<p>The main command line, <code>haddock3</code> is used to launch a Haddock3 workflow from a <a href="/software/haddock3/manual/config_file">configuration file</a>.
It takes a positional argument, the path to the configuration file.</p>
<pre><code class="language-bash">haddock3 workflow.cfg
</code></pre>
<p>Also two optional arguments can be used:</p>
<ul>
<li><code>--restart &lt;module_id&gt;</code>: allows to restart the workflow restarting for the module id. Note that previously generated folders from the selected step onward will be deleted.</li>
<li><code>--extend-run &lt;run_directory&gt;</code>: allows to start the new workflow from the last step of a previously computed run.</li>
</ul>
<h2 id="haddock3-cfg"><a class="header" href="#haddock3-cfg">haddock3-cfg</a></h2>
<p>An other very interesting CLI is <code>haddock3-cfg</code>.
This CLI allows you to list the parameter names, their description and default values for each available modules.
Used without any option, the command <code>haddock3-cfg</code> will return all <a href="/software/haddock3/manual/global_parameters">Global parameters</a>.</p>
<p>To access the list of parameters for a given module, you should use the optinal argument <code>-m &lt;module_name&gt;</code>.
As an example, to list available parameters for the module <code>seletopclusts</code>, you should run the following command:</p>
<pre><code class="language-bash">haddock3-cfg -m seletopclusts
</code></pre>
<p>Please note that all the parameters for each module are also available from the <a href="https://www.bonvinlab.org/haddock3/modules/index.html">online documentation</a>.</p>
<h2 id="haddock3-restraints"><a class="header" href="#haddock3-restraints">haddock3-restraints</a></h2>
<p>The CLI <code>haddock3-restraints</code> is made to generate restraints used either a ambiguous restraints or unambiguous ones.
The <code>haddock3-restraints</code> CLI is composed of several sub-commands, each one dedicated to some specific actions, such as:</p>
<ul>
<li>Searching for solvent accessible residues</li>
<li>Gathering neighbors of a selection</li>
<li>Maintaining the conformation of a single chain with potential gap</li>
<li>Generating ambiguous restraints from active and passive resiudes</li>
<li>Generating plans and corresponding restraints</li>
</ul>
<p>As this CLI is more specialized, we have made a <a href="/software/haddock3/manual/restraints_cli">special chapter in this manual</a> to explain all the functionalities.</p>
<h2 id="haddock3-score"><a class="header" href="#haddock3-score">haddock3-score</a></h2>
<p>The <code>haddock3-score</code> is a CLI made for scoring a single complex.
The topologies are created and a small energy minimization is performed on the complex before the evalutation of the haddock score components.
It is dedicated to the scoring of it and only returns the computed haddock score and its components.
It is a short cut to a full configuration file that would contain the <code>topoaa</code> and <code>emscoring</code> modules.</p>
<p>To use it, provide the path to the complex to be scored:</p>
<pre><code class="language-bash">haddock3-score path/to/complex.pdb
</code></pre>
<p>This CLI can take optional parameters using the <code>-p</code> flag, where the user can provide the set of parameter and values to tune the weights of the Haddock scoring function.
Be aware that only parameters available for the <code>emscoring</code> module are accepted.</p>
<p>To tune the haddock3 scoring function weights, there are basically only 5 parameters to be tuned.</p>
<ul>
<li><strong>w_vdw</strong>: to tune the weight of the Van der Walls term</li>
<li><strong>w_elec</strong>: to tune the weight of the Electrostatic term</li>
<li><strong>w_desolv</strong>: to tune the weight of the Desolvation term</li>
<li><strong>w_air</strong>: to tune the weight of the Ambiguous Restraints term</li>
<li><strong>w_bsa</strong>: to tune the weight of the Burried Surface Area term</li>
</ul>
<p>Note that, if a parameter is not tuned, the defaults scoring function weights are used.</p>
<p>As an example, this command would tune the Van der Walls term during the evaluation of the complex:</p>
<pre><code class="language-bash">haddock3-score path/to/complex.pdb -p w_vdw 0.5
</code></pre>
<p>Note how the parameter name and its new value are separated by a space.</p>
<p>To modify multiple parameters, just add the new parameter separate by a space:</p>
<pre><code class="language-bash">haddock3-score path/to/complex.pdb -p w_vdw 0.5 w_bsa 0.2
</code></pre>
<h2 id="haddock3-analyse"><a class="header" href="#haddock3-analyse">haddock3-analyse</a></h2>
<p>HADDOCK3 allows to analyse different steps of the workflow, even after it has been completed. The <code>haddock3-analyse</code> command is the main tool for the analysis of one or more workflow steps. Typically it runs automatically at the end of a HADDOCK3 workflow (activated by the <a href="#the-postprocess-option"><code>postprocess</code></a> option), but it can be run independently as well.</p>
<pre><code>haddock3-analyse -r my-run-folder -m 2 5 6
</code></pre>
<p>Here <code>my-run-folder</code> is the run directory and 2, 5, and 6 are the steps that you want to analyse.</p>
<p>The command will inspect the folder, looking for the existing models. If the selected module is a <code>caprieval</code> module, <code>haddock3-analyse</code> simply loads the <code>capri_ss.tsv</code> and <code>capri_clt.tsv</code> files
produced by the <code>caprieval</code> module. Otherwise, <code>haddock3-analyse</code> runs a <code>caprieval</code> analysis of the models.
You can provide some <a href="https://github.com/haddocking/haddock3/blob/main/src/haddock/modules/analysis/caprieval/defaults.yaml">caprieval-specific parameters</a>
using the following syntax:</p>
<pre><code>haddock3-analyse -r my-run-folder -m 2 5 6 -p reference_fname my_ref.pdb receptor_chain F
</code></pre>
<p>Here the <code>-p</code> key tells the code that you are about to insert caprieval parameters, whose name should match the parameter name. Each parameter name and the corresponding value must be separated by a space character.</p>
<p>Another parameter that can be specified is <code>top_cluster</code>, which defines how many of the first N clusters will be considered in the analysis.
This value is set to 10 by default.</p>
<pre><code>haddock3-analyse -r my-run-folder -m 2 5 6 --top_cluster 12
</code></pre>
<p>This number is meaningless when dealing with models with no cluster information, that is, models that have never been clustered before.</p>
<p>By default <code>haddock3-analyse</code> produces <a href="https://plotly.com/python/">plotly</a> plots in the html <code>format</code>, but the user can select
one of the formats available <a href="https://plotly.github.io/plotly.py-docs/generated/plotly.io.write_image.html">here</a>,
while also adjusting the resolution with the <code>scale</code> parameter:</p>
<pre><code>haddock3-analyse -r my-run-folder -m 2 5 6 --format pdf --scale 2.0
</code></pre>
<h4 id="the-analysis-folder"><a class="header" href="#the-analysis-folder">The analysis folder</a></h4>
<p>After running <code>haddock3-analyse</code> you can check the content of the <code>analysis</code> directory in your run folder.
If everything went succesfully, one of the above commands should have produced an analysis folder structured as</p>
<pre><code>my-run-folder/
|--- analysis/
     |--- 2_caprieval_analysis
     |--- 5_seletopclusts_analysis
     |--- 6_flexref_analysis
</code></pre>
<p>Each subfolder contains all the analysis plots related to that specific step of the workflow.</p>
<p>By default <code>haddock3-analyse</code> produces a set of scatter plots that compare each HADDOCK energy term
(i.e., the HADDOCK score and its components) to the different metrics used to evaluate the quality of a model,
such as the interface-RMSD, Fnat, DOCKQ, and so on. An example is available <a href="../../../education/HADDOCK3/HADDOCK3-antibody-antigen/plots/scenario1-surface/irmsd_score.html">here</a>.</p>
<p>For each of the energy component and the metrics mentioned above <code>haddock3-analyse</code> produces also a box plot, in which each cluster
is considered separately. An example is available <a href="../../../education/HADDOCK3/HADDOCK3-antibody-antigen/plots/scenario1-surface/score_clt.html">here</a>.</p>
<h4 id="the-report"><a class="header" href="#the-report">The report</a></h4>
<p>Scatter plots, box plots, CAPRI statistics and an interactive visualization of the models is available in the <code>report.html</code> file, present
in each analysis subfolder. In order to visualize the models it is necessary to start a local server at the end of the <code>haddock3-analyse</code> run,
following the indications provided in the log file:</p>
<pre><code>[2023-08-24 10:09:09,552 cli_analyse INFO] View the results in analysis/12_caprieval_analysis/report.html
[2023-08-24 10:09:09,552 cli_analyse INFO] To view structures or download the structure files, in a terminal run the command
`python -m http.server --directory /haddock3/examples/docking-antibody-antigen/run1-CDR-acc-cltsel-test`.
By default, http server runs on `http://0.0.0.0:8000/`. Open the link
http://0.0.0.0:8000/analysis/12_caprieval_analysis/report.html in a web browser.
</code></pre>
<p>Launch this command to open the report:</p>
<pre><code>python -m http.server --directory path-to-my-run
</code></pre>
<p>In the browser you can navigate to each analysis subfolder and open the <code>report.html</code> file. If you are not interested in
visualizing the models, you can simply open the <code>report.html</code> file in a standard browser. An example report can be visualized <a href="../../../education/HADDOCK3/HADDOCK3-protein-glycan/plots/report.html">here</a>.</p>
<h2 id="haddock3-traceback"><a class="header" href="#haddock3-traceback">haddock3-traceback</a></h2>
<p>HADDOCK3 is highly customisable and modular, as the user can introduce several refinement, clustering, and scoring steps in a workflow.
Quantifying the impact of the different modules is important while developing a novel docking protocol. The <code>haddock3-traceback</code> command
is developed to assist the user in this task, as it allows to "connect" all the models generated in a HADDOCK3 workflow:</p>
<pre><code>haddock3-traceback my-run-folder
</code></pre>
<p><code>haddock3-traceback</code> creates a traceback subfolder within the <code>my-run-folder</code> directory, containing a <code>traceback.tsv</code> table:</p>
<pre><code>00_topo1     00_topo2        01_rigidbody            01_rigidbody_rank       04_seletopclusts        04_seletopclusts_rank   06_flexref      06_flexref_rank 
4G6K.psf     4I1B.psf        rigidbody_10.pdb        3                       cluster_1_model_1.pdb   1                       flexref_1.pdb   2       
4G6K.psf     4I1B.psf        rigidbody_11.pdb        10                      cluster_1_model_2.pdb   3                       flexref_3.pdb   1       
4G6K.psf     4I1B.psf        rigidbody_18.pdb        4                       cluster_2_model_1.pdb   2                       flexref_2.pdb   4      
4G6K.psf     4I1B.psf        rigidbody_20.pdb        15                      cluster_2_model_2.pdb   4                       flexref_4.pdb   3       
</code></pre>
<p>In this table each row represents a model that has been produced by the workflow. The (typically) two used topologies are reported first,
and then each module has its own column, containing the name and rank of the model at that stage. As an example, in the first row of the
table above <code>rigidbody_10.pdb</code> is ranked 3rd at the <code>rigidbody</code> stage. Then, it becomes <code>cluster_1_model_1.pdb</code> (ranked 1st) after
the <code>seletopclusts</code> module. This model is then refined in <code>flexref_1.pdb</code>, which turns out to be the 2nd best model at the end of the workflow.</p>
<p>The table can be easily parsed and used to evaluate the impact of different refinement steps on the different models.</p>
<h2 id="the-postprocess-option"><a class="header" href="#the-postprocess-option">The postprocess option</a></h2>
<p>You may want to run the <code>haddock3-analyse</code> and <code>haddock3-traceback</code> commands by default at the end of the workflow.
The <code>postprocess</code> option of a standard HADDOCK3 configuration (.cfg) file is devoted to this task. At first, it forces HADDOCK3
to execute <code>haddock3-analyse</code> on all the <code>caprieval</code> folders found in the workflow, therefore loading data present in the CAPRI tables.
Second, it executes the <code>haddock3-traceback</code> command.</p>
<p>By default, <code>postprocess</code> is set to <code>true</code> but can also be de-activated at the beginning of your configuration file:</p>
<pre><code> ====================================================================
# This is a HADDOCK3 configuration file

# directory in which the docking will be done
run_dir = "my-run-folder"

# postprocess the run
postprocess = false

...
</code></pre>
<p><a class="prompt prompt-info">If speed is an issue, please turn the postprocess option off for your run!</a></p>
<p>You can find additional help by running the command: <code>haddock3-analyse -h</code> and <code>haddock3-traceback -h</code> and reading
the parameters' explanations. Otherwise, ask us in the <a href="https://github.com/haddocking/haddock3/issues">"issues" forum</a>.</p>
<h2 id="haddock3-re"><a class="header" href="#haddock3-re">haddock3-re</a></h2>
<p>The <code>haddock3-re</code> CLI is dedicated at <strong>re</strong>computing some steps in your workflow.
This can be very usefull as it allows to fine tune parameters and evaluate the impact in the results.</p>
<p><code>haddock3-re</code> takes two mandatory positional arguments:</p>
<ul>
<li>**1: **The name of the subcommand</li>
<li>**2: **Path to the module on which to apply the modifications in your run</li>
</ul>
<p>By running <code>haddock3-re</code>, a new directory will be created, with the <code>_interactive</code> suffix, where the new results are stored.
Relaunching several times <code>haddock3-re</code> on the same directory will update the content in the <code>_interactive</code> one.</p>
<p>For now, three modules can be <strong>re</strong>computed and tuned, <code>[caprieval]</code>, <code>[clustfcc]</code> and <code>[clustrmsd]</code>.</p>
<h3 id="-re-score"><a class="header" href="#-re-score">-re score</a></h3>
<p>The subcommand <code>haddock3-re score</code>, allows to tune the weights of the <a href="">HADDOCK scoring function</a>.
It takes a <code>[caprieval]</code> step folder as positional argument, and the tuned weights for the scoring function.</p>
<p>Note that if you do not provide new weights as optional arguments, previous weights used in the run are used.</p>
<p>Usage:</p>
<pre><code class="language-bash">haddock3-re clustrmsd &lt;path/to/the/module/step/X_caprieval&gt;

optional arguments:
  -e W_ELEC, --w_elec W_ELEC
                        weight of the electrostatic component.
  -w W_VDW, --w_vdw W_VDW
                        weight of the van-der-Waals component.
  -d W_DESOLV, --w_desolv W_DESOLV
                        weight of the desolvation component.
  -b W_BSA, --w_bsa W_BSA
                        weight of the BSA component.
  -a W_AIR, --w_air W_AIR
                        weight of the AIR component.
</code></pre>
<h3 id="-re-clustfcc"><a class="header" href="#-re-clustfcc">-re clustfcc</a></h3>
<p>The subcommand <code>haddock3-re clustfcc</code>, allows to tune the clustering parameters of the <code>[clustfcc]</code> module.
It takes a <code>[clustfcc]</code> step folder as positional argument, and the tuned parameters for the module.</p>
<p>Note that if you do not provide new parameters as optional arguments, previous ones will be used instead.</p>
<p>Usage:</p>
<pre><code class="language-bash">haddock3-re clustfcc &lt;path/to/the/module/step/X_clustfcc&gt;

optional arguments:
  -f CLUST_CUTOFF, --clust_cutoff CLUST_CUTOFF
                        Minimum fraction of common contacts to be considered in a cluster.
  -s STRICTNESS, --strictness STRICTNESS
                        Strictness factor.
  -t MIN_POPULATION, --min_population MIN_POPULATION
                        Clustering population threshold.
  -p, --plot_matrix     Generate the matrix plot with the clusters.
</code></pre>
<h3 id="-re-clustrmsd"><a class="header" href="#-re-clustrmsd">-re clustrmsd</a></h3>
<p>The subcommand <code>haddock3-re clustrmsd</code>, allows to tune the clustering parameters of the <code>[clustrmsd]</code> module.
It takes a <code>[clustrmsd]</code> step folder as positional argument, and the tuned parameters for the module.</p>
<p>Note that if you do not provide new parameters as optional arguments, previous ones will be used instead.</p>
<p>Usage:</p>
<pre><code class="language-bash">haddock3-re clustrmsd &lt;path/to/the/module/step/X_clustrmsd&gt;

optional arguments:
  -n N_CLUSTERS, --n_clusters N_CLUSTERS
                        number of clusters to generate.
  -d CLUST_CUTOFF, --clust_cutoff CLUST_CUTOFF
                        clustering cutoff distance.
  -t MIN_POPULATION, --min_population MIN_POPULATION
                        minimum cluster population.
  -p, --plot_matrix     Generate the matrix plot with the clusters.
</code></pre>
<p>Please note that parameters <code>--n_clusters</code> (defining the number of clusters you want)
and <code>--clust_cutoff</code> are mutually exclusive,
as the former is cutting the dendogram at a height satifying the number of desired clusters
while the latter is cutting the dendogram at the <code>--clust_cutoff</code> value height.</p>
<h2 id="haddock3-copy"><a class="header" href="#haddock3-copy">haddock3-copy</a></h2>
<p>The <code>haddock3-copy</code> CLI allows one to copy the content of a run to an other run directory.</p>
<p>It takes three arguments:</p>
<ul>
<li><strong><code>-r run_directory</code></strong> is the directory of a previously computed haddock3 run.</li>
<li><strong><code>-o new_run_directory</code></strong> is the new directory where to make to copy of the old run.</li>
<li><strong><code>-m module_id_X module_id_Y</code></strong> is the list of modules you wish to copy (separated by spaces).</li>
</ul>
<p>As an example, considering your previous run directory is named <code>run1</code> and contains the following modules:</p>
<pre><code class="language-bash">run1/
  0_topoaa/
  1_rigidbody/
  2_caprieval/
  3_seletop/
  4_flexref/
  (etc...)
</code></pre>
<p>You may want to use <code>4_flexref</code> step folder as a starting point for a new run names <code>run2</code>.
To do so, run the following command:</p>
<pre><code class="language-bash">haddock3-copy -r run1 -m 0 4 -o run2
</code></pre>
<p><strong>Notes</strong>:</p>
<ul>
<li>the flag <code>-m</code> allows to define which modules must be copied, and modules <code>0</code> (for <code>0_topoaa</code>) and <code>4</code>  (for <code>4_flexref</code>) are space separated.</li>
<li>in this case, we also copy the content of <code>0_topoaa</code>, this is because topologies are stored in this module directory, and we must have access to them if we are using an other module requiering CNS topology to run.</li>
</ul>
<p><strong>WARNING</strong>:
To copy the content of a run and modify the paths, we are using the <code>sed</code> command, searching to replace the previous run directory name (<code>run1</code>) to the new one (<code>run2</code>) in all the generated files to make sure that paths will be functional in the new run directory.
In some cases, this can lead to some artefacts, such as the modification of attribute names if your run directory contain a name that is used by haddock3.</p>
<p>Here is a list of run directory names <strong>NOT</strong> to use:</p>
<ul>
<li>topology</li>
<li>score</li>
<li>emref</li>
<li>etc...</li>
</ul>
<p>The best solution is to always use a unique name that describe the content of the run.</p>
<h2 id="haddock3-clean"><a class="header" href="#haddock3-clean">haddock3-clean</a></h2>
<p>The<code> haddock3-clean</code> CLI performs file archiving and file compressing operations on the output of an haddock3 run directory.
This CLI can save you some harddrive storage space, as the multiple files generated by HADDOCK can lead to several GigaBites of data, therefore compressing them allows to keep them while saving some precious splace.</p>
<p>All <code>.inp</code> and <code>.out</code> files are deleted except for the first one, which is compressed to <code>.gz</code>.
On the other hand, all <code>.seed</code> and <code>.con</code> files are compressed and archived to <code>.tgz</code> files.
Finally, <code>.pdb</code> and <code>.psf</code> files are compressed to <code>.gz</code>.</p>
<p>The &lt;run_directory&gt; can either be a whole HADDOCK3 run folder or a specific folder of the workflow step. <ncores> defines the number of threads to use; by default uses a single core.</p>
<p>Please note that by default this CLI is launched automatically at the end of a workflow.
It is exposed as generaral parameter <code>clean = true</code>.
To switch off this behavior, you can set it to false in your configuration file.</p>
<p>Usages:</p>
<pre><code class="language-bash"># Display help
haddock3-clean -h
haddock3-clean run1 # Where run1 is a path to a haddock3 run directory
haddock3-clean run1/1_rigidbody  # Where 1_rigidbody is the output of the rigidbody module
haddock3-clean run1 -n  # uses all cores
haddock3-clean run1 -n 2  # uses 2 cores
</code></pre>
<p>Here is the list of arguments:</p>
<pre><code class="language-bash">positional arguments:
  run_dir               The run directory.

optional arguments:
  -n [NCORES], --ncores [NCORES]
                        The number of threads to use. Uses 1 if not specified. Uses all available threads if `-n` is given. Else,
                        uses the number indicated, for example: `-n 4` will use 4 threads.
  -v, --version         show version
</code></pre>
<h2 id="haddock3-unpack"><a class="header" href="#haddock3-unpack">haddock3-unpack</a></h2>
<p>The <code>haddock3-unpack</code> CLI is the oposite of the <code>haddock3-clean</code> one.
It takes a haddock3 run directory as input (or the output directory of a module), and uncompress archives found within.</p>
<p>This CLI can be especially usefull when your run has been archived, but you would like to open a PDB file using a molecular viewer.</p>
<p>The unpack process performs file unpacking and file decompressing operations.
File with extension <code>seed</code> and <code>con</code> are unpacked from their <code>.tgz</code> files.
While files with <code>.pdb.gz</code> and <code>.psf.gz</code> extension are uncompressed.
If <code>--all</code> is given, unpack also <code>.inp.gz</code> and <code>.out.gz</code> files.</p>
<p>Usage:</p>
<pre><code class="language-bash"># To display help
haddock3-unpack -h
# To unpack the entier run directory
haddock3-unpack run1
# To unpack the output directory of a specific module
haddock3-unpack run1/1_rigidbody
# Define the number of cores to use
haddock3-unpack run1 -n  # uses all cores
haddock3-unpack run1 -n 2  # uses 2 cores
# Add the -a or --all to specify that all compressed files must be unpacked
haddock3-unpack run1 -n 2 -a
haddock3-unpack run1 -n 2 --all
</code></pre>
<p>Arguments:</p>
<pre><code class="language-bash">positional arguments:
  run_dir               The run directory.

optional arguments:
  -h, --help            show this help message and exit
  --all, -a             Unpack all files (includes `.inp` and `.out`).
  -n [NCORES], --ncores [NCORES]
                        The number of threads to use. Uses 1 if not specified. Uses all available threads if `-n` is given. Else,
                        uses the number indicated, for example: `-n 4` will use 4 threads.
  -v, --version         show version
</code></pre>
<h2 id="haddock3-pp"><a class="header" href="#haddock3-pp">haddock3-pp</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="virtual-environments.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="structure_requirements.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="virtual-environments.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="structure_requirements.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
